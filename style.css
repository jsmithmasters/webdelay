*{box-sizing:border-box}html,body{height:100%;margin:0;background:#0d0d0d;color:#fff;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.app-header{position:sticky;top:0;padding:0.5rem 1rem;background:#111;border-bottom:1px solid #222;display:flex;align-items:center;gap:1rem}
.app-header h1{font-size:1.1rem;margin:0;font-weight:600}
.app-header .ghost{margin-left:auto;background:transparent;border:1px solid #333;color:#ccc;border-radius:10px;padding:0.3rem 0.6rem}

.app-shell{display:flex;gap:1rem;height:calc(100dvh - 50px);padding:1rem}
.video-wrap{position:relative;flex:1;display:flex;align-items:center;justify-content:center;background:#000;border-radius:16px;overflow:hidden}
#preview{display:none}
#stage{max-width:100%;max-height:100%;height:auto;width:auto;image-rendering:auto}
.controls{width:320px;display:flex;flex-direction:column;gap:0.75rem}
.controls .row{display:flex;align-items:center;gap:0.5rem}
.controls .row.buttons{flex-wrap:wrap;gap:0.5rem}
.controls button{background:#1f1f1f;color:#fff;border:1px solid #2a2a2a;border-radius:12px;padding:0.6rem 0.8rem}
.controls button:disabled{opacity:0.4}
label{min-width:80px;color:#bbb}
output{min-width:2ch;text-align:right}
#status{min-height:1.2rem;color:#9ad}

@media (orientation:portrait){
  .app-shell{flex-direction:column}
  .controls{width:auto;flex-direction:column}
}

#viewerOverlay{position:fixed;inset:0;display:grid;grid-template-rows:auto 1fr;background:#000;z-index:9999;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}
.viewer-bar{display:flex;align-items:center;gap:1rem;background:rgba(0,0,0,0.5);padding:0.5rem}
#viewerImg{width:100%;height:100%;object-fit:contain;touch-action:pan-x pan-y pinch-zoom}
#safeInsetTop,#safeInsetBottom{position:absolute;left:0;right:0;height:env(safe-area-inset-top);bottom:auto;top:0}
#safeInsetBottom{top:auto;bottom:0;height:env(safe-area-inset-bottom)}

/* viewer fixes */

#viewerOverlay{position:fixed;inset:0;display:grid;grid-template-rows:auto 1fr;background:#000;z-index:99999;
  padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  pointer-events:auto}
#viewerOverlay *{pointer-events:auto}
.viewer-bar{position:relative;z-index:2;display:flex;align-items:center;gap:1rem;background:rgba(0,0,0,0.5);padding:0.5rem}
#viewerImg{width:100%;height:100%;object-fit:contain;touch-action:pan-x pan-y pinch-zoom}
